# Morning TimeTree v1.0 â€” è¨­è¨ˆæ›¸ï¼ˆä¿®æ­£ç‰ˆï¼‰

## ç›®çš„ / æ–¹å¼
- ç›®çš„: æ¯æœ 06:00 JST ã« TimeTree ã®å½“æ—¥äºˆå®šã‚’è‡ªåˆ†ã® LINE ã« 1 é€šã§é€šçŸ¥
- æ–¹å¼: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼ˆGitHub Actions ã®ã¿ï¼‰
- å‚™è€ƒ: TimeTree å…¬å¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸å¯ã®ãŸã‚ã€å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã§ ICS ã‚’ç”Ÿæˆ â†’ å½“æ—¥æŠ½å‡º â†’ LINE Notify é€ä¿¡

## å®Ÿè¡Œ/é‹ç”¨
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«: `cron: 0 21 * * *`ï¼ˆ21:00 UTC = 06:00 JSTï¼‰
- è¨±å®¹é…å»¶: GitHub Actions ã®ç‰¹æ€§ä¸Šã€Â±æ•°åˆ†ã®é…å»¶ã‚’è¨±å®¹
- éã‚¢ã‚¯ãƒ†ã‚£ãƒ–åœæ­¢: ãƒªãƒã‚¸ãƒˆãƒªãŒé•·æœŸé–“ç„¡æ´»å‹•ã ã¨åœæ­¢ã—å¾—ã‚‹ï¼ˆæ—¢å®šæŒ™å‹•ï¼‰ã€‚æœ¬ã‚¸ãƒ§ãƒ–ã¯æ—¥æ¬¡å®Ÿè¡Œã®ãŸã‚å®Ÿå®³ã¯å°
- é‡è¤‡é˜²æ­¢: `concurrency: { group: morning-timetree, cancel-in-progress: true }`
- æ‰‹å‹•å®Ÿè¡Œ: `workflow_dispatch` ã§ `date` å…¥åŠ›ã«ã‚ˆã‚Šä»»æ„æ—¥ã§ã®ãƒªãƒãƒ¼ã‚µãƒ«ã‚’å¯èƒ½ã«

## ä¾å­˜
- Python 3.12
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: `icalendar`, `requests`ï¼ˆå®‰å®šå¾Œã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®šï¼‰
- å¤–éƒ¨ãƒ„ãƒ¼ãƒ«: `timetree-exporter`ï¼ˆICS ç”Ÿæˆç”¨ã€‚CLI å¼•æ•°ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚Šå·®ç•°ã‚ã‚Šï¼‰

## ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ / å½“æ—¥æŠ½å‡º
- TZ: `Asia/Tokyo`ï¼ˆã‚³ãƒ¼ãƒ‰å´ã¯ `zoneinfo` ã‚’ä½¿ç”¨ï¼‰
- å½“æ—¥ç¯„å›²: `[ä»Šæ—¥ 00:00 JST, ç¿Œæ—¥ 00:00 JST)`ï¼ˆçµ‚ç«¯ã¯æ’ä»–çš„ï¼‰
- æ­£è¦åŒ–:
  - `date` å‹ â†’ ãã®æ—¥ã® `00:00 JST`
  - `datetime`ï¼ˆnaiveï¼‰â†’ JST ã¨ã¿ãªã™
  - `datetime`ï¼ˆtz ä»˜ãï¼‰â†’ JST ã¸å¤‰æ›
- çµ‚æ—¥åˆ¤å®š: å…ƒã® `DTSTART` ãŒ `date` å‹ã®å ´åˆã®ã¿çµ‚æ—¥æ‰±ã„
- åŒ…å«æ¡ä»¶ï¼ˆå®‰å…¨å½¢ï¼‰: `event_end > day_start && event_start < next_day_start`
- è¡¨ç¤ºç”¨ã‚¯ãƒªãƒƒãƒ—: `start = max(event_start, day_start)`, `end = min(event_end, next_day_start)`

## è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- ãƒ˜ãƒƒãƒ€: `ğŸ“… æœ¬æ—¥ã®äºˆå®š yyyy/MM/dd(æ›œ)`
- ä¸¦ã³é †: çµ‚æ—¥ â†’ æ™‚é–“æŒ‡å®šï¼ˆé–‹å§‹æ™‚åˆ»æ˜‡é †ï¼‰
- è¡Œ:
  - çµ‚æ—¥: `â€¢ çµ‚æ—¥ ã‚¿ã‚¤ãƒˆãƒ«`
  - æ™‚é–“: `â€¢ HH:mmâ€“HH:mm ã‚¿ã‚¤ãƒˆãƒ«`
  - å ´æ‰€: ã‚ã‚‹å ´åˆã®ã¿ ` ï¼ å ´æ‰€` ã‚’ä»˜åŠ 
- äºˆå®šãªã—: `ğŸŸ¢ äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“`
- æ–‡å­—æ•°åˆ¶é™: LINE Notify ã¯ 1000 æ–‡å­—ä¸Šé™ â†’ è¶…éæ™‚ã¯ `â€¦ã»ã‹Nä»¶` ã‚’ä»˜ä¸ã—ã¦åˆ‡ã‚Šè©°ã‚

## ã‚¨ãƒ©ãƒ¼/å†é€
- å¤±æ•—æ™‚ã¯ Fail ã§çµ‚äº†ï¼ˆãƒ­ã‚°ã‹ã‚‰èª¿æŸ»ï¼‰ã€‚è‡ªå‹•å†é€ã¯ä¸è¦
- LINE é€ä¿¡ã¯ 10 ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€‚4xx ã¯å³ Failã€5xx ã¯å†è©¦è¡Œã¯è¡Œã‚ãªã„ï¼ˆå¿…è¦ãªã‚‰å°†æ¥è¿½åŠ ï¼‰

## Secretsï¼ˆGitHub Actionsï¼‰
- `TIMETREE_EMAIL`, `TIMETREE_PASSWORD`, `TIMETREE_CALENDAR_CODE`, `LINE_TOKEN`
- Secrets ä»¥å¤–ã«å¹³æ–‡ã§ä¿æŒã—ãªã„

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆæœ€å°ï¼‰
```
. 
â”œâ”€ .github/workflows/notify.yml
â”œâ”€ notify.py
â”œâ”€ requirements.txt
â”œâ”€ DESIGN.md
â””â”€ SECURITY.md
```

## å—ã‘å…¥ã‚ŒåŸºæº–
- 06:00 JST å‰å¾Œã« 1 æ—¥ 1 å›é€šçŸ¥ã•ã‚Œã‚‹
- JST ã®ã€Œä»Šæ—¥ã€ã«ã‹ã‹ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆçµ‚æ—¥ãƒ»è·¨ãå«ã‚€ï¼‰
- çµ‚æ—¥/æ™‚é–“/å ´æ‰€ãŒä»•æ§˜é€šã‚Šã«æ•´å½¢ã•ã‚Œã‚‹
- äºˆå®šã‚¼ãƒ­æ™‚ã«ã€ŒğŸŸ¢ äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
- 1000 æ–‡å­—è¶…ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãšé©åˆ‡ã«åˆ‡ã‚Šè©°ã‚ã‚‰ã‚Œã‚‹
- Secrets ä»¥å¤–ã«è³‡æ ¼æƒ…å ±ãŒéœ²å‡ºã—ãªã„

